@using System.Collections.Generic
@using Microsoft.AspNet.Http
@using Microsoft.AspNet.Http.Authentication
@model LoginViewModel
@inject SignInManager<ApplicationUser> SignInManager

@{
    ViewData["Title"] = "[Folio]";
}
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Table Style</title>
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;">
</head>

<body>
    <table class="table-fill">
        <thead>
            <tr>
                <th class="text-left">Symbol</th>
                <th class="text-left">Name</th>
                <th class="text-left">Price</th>
                <th class="text-left">Change</th>
            </tr>
        </thead>
        <tbody class="table-hover">
            <tr>
                <td id="tickerGOOG"class="text-left">Symbol</td>
                <td id="nameGOOG" class="text-left">Name</td>
                <td id="priceGOOG"class="text-left">Price</td>
                <td id="changeGOOG"class="text-left">Change</td>
            </tr>
        </tbody>
    </table>


</body>
</html>
<script>
    var yolo = "whatever";
    function getData(sym) {
        var url = "https://query.yahooapis.com/v1/public/yql";
        var symbol = sym;
        var data = encodeURIComponent("select * from yahoo.finance.quotes where symbol in ('" + symbol + "')");

        $.getJSON(url, 'q=' + data + "&format=json&diagnostics=true&env=http://datatables.org/alltables.env")
            .done(function (data) {
                yolo = data;
                console.log(yolo);
                if (yolo.query.results.quote.LastTradePriceOnly !== $("#price" + sym).text() || yolo.query.results.quote.LastTradePriceOnly == null) {
                    $("#price" + sym).fadeOut(function () {
                        $(this).text(yolo.query.results.quote.LastTradePriceOnly)
                    }).fadeIn();
                    $("#change" + sym).fadeOut(function () {
                        $(this).text(yolo.query.results.quote.PercentChange)
                    }).fadeIn();
                    $("#name" + sym).fadeOut(function () {
                        $(this).text(yolo.query.results.quote.Name)
                    }).fadeIn();
                    $("#ticker" + sym).fadeOut(function () {
                        $(this).text(yolo.query.results.quote.symbol)
                    }).fadeIn();

                }
            })
            .fail(function (jqxhr, textStatus, error) {
                var err = textStatus + ", " + error;
                $("#price" + sym).text('Request failed: ' + err);
            });
    }
    $(document).ready(function () {
        getData("GOOG");
    });
    var date = new Date();
    var hours = date.getHours();
    console.log(hours);
    if (hours < 16 && hours > 9)
    {
        window.setInterval(function () { getData("GOOG")}, 5000);
    }
    </script>